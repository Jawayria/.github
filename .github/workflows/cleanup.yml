name: cleanup

on:
  workflow_dispatch:
    inputs:
      repos_list:
        description: "List of repositories where you want to run the job"
        type: string
        required: true

jobs:

  split_string:
    runs-on: ubuntu-20.04

    outputs:
      output1: ${{ steps.split_string.outputs.list }}
    steps:

    - name: get repos list
      id: split_string
      run: |
        echo "::set-output name=list::[${{github.event.inputs.repos_list}}]"

    - name: print
      run: echo ${{ steps.split_string.outputs.list }}

  cleanup:
    runs-on: ubuntu-20.04
    needs: [ split_string ]
    strategy:
      matrix:
        repos: ${{fromJson(needs.split_string.outputs.output1)}}

    steps:
      - name: print repo
        run: echo ${{ github.repository }}

      - uses: actions/checkout@v2
        with:
            repository: ${{ matrix.repos }}

      - name: print repo
        run: pwd
